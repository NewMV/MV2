name: ðŸš€ TradingView 500 Symbols - Shard 0 (Rows 2-501)
on: workflow_dispatch

jobs:
  scrape-shard-0:
    runs-on: ubuntu-latest
    timeout-minutes: 30
    
    steps:
    - uses: actions/checkout@v4
    - uses: actions/setup-python@v5
      with: python-version: '3.11'
    - name: Install deps
      run: pip install selenium gspread beautifulsoup4 webdriver-manager
    - name: Credentials
      env:
        GSPREAD_CREDENTIALS: ${{ secrets.GSPREAD_CREDENTIALS }}
      run: echo "$GSPREAD_CREDENTIALS" > credentials.json
    - name: Scrape 500 symbols
      env:
        GSPREAD_CREDENTIALS: ${{ secrets.GSPREAD_CREDENTIALS }}
        START_INDEX: 0
        END_INDEX: 499
        CHECKPOINT_FILE: shard0_checkpoint.txt
      run: python run_scraper.py
    - name: Verify Sheet5 rows 2-501
      env:
        GSPREAD_CREDENTIALS: ${{ secrets.GSPREAD_CREDENTIALS }}
      run: |
        echo "$GSPREAD_CREDENTIALS" > creds.json
        python -c "
import gspread
client = gspread.service_account('creds.json')
sheet = client.open_by_url('https://docs.google.com/spreadsheets/d/1GKlzomaK4l_Yh8pzVtzucCogWW5d-ikVeqCxC6gvBuc').worksheet('Sheet5')
print('âœ… Shard 0: Rows 2-501 COMPLETE')
print(f'Row 2: {sheet.cell(2,1).value[:20]}...')
print(f'Row 501: {sheet.cell(501,1).value[:20]}...')
"
